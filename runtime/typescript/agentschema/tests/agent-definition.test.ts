// Copyright (c) Microsoft. All rights reserved.
// WARNING: This is an auto-generated file. DO NOT EDIT THIS FILE DIRECTLY.

import { describe, it, expect } from "vitest";
import { AgentDefinition } from "../src/agent-definition";

describe("AgentDefinition", () => {
  describe("construction", () => {
    it("should create a new instance with defaults", () => {
      const instance = new AgentDefinition();
      expect(instance).toBeDefined();
    });

    it("should create a new instance with partial initialization", () => {
      const instance = new AgentDefinition({});
      expect(instance).toBeDefined();
    });
  });

  describe("JSON serialization", () => {
    it("should load from JSON - example 1", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": {\n      "firstName": {\n        "kind": "string",\n        "value": "Jane"\n      },\n      "lastName": {\n        "kind": "string",\n        "value": "Doe"\n      },\n      "question": {\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    }\n  },\n  "outputSchema": {\n    "properties": {\n      "answer": {\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    }\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip JSON - example 1", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": {\n      "firstName": {\n        "kind": "string",\n        "value": "Jane"\n      },\n      "lastName": {\n        "kind": "string",\n        "value": "Doe"\n      },\n      "question": {\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    }\n  },\n  "outputSchema": {\n    "properties": {\n      "answer": {\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    }\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      const output = instance.toJson();
      const reloaded = AgentDefinition.fromJson(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });

    it("should load from JSON - example 2", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": {\n      "firstName": {\n        "kind": "string",\n        "value": "Jane"\n      },\n      "lastName": {\n        "kind": "string",\n        "value": "Doe"\n      },\n      "question": {\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    }\n  },\n  "outputSchema": {\n    "properties": [\n      {\n        "name": "answer",\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    ]\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip JSON - example 2", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": {\n      "firstName": {\n        "kind": "string",\n        "value": "Jane"\n      },\n      "lastName": {\n        "kind": "string",\n        "value": "Doe"\n      },\n      "question": {\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    }\n  },\n  "outputSchema": {\n    "properties": [\n      {\n        "name": "answer",\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    ]\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      const output = instance.toJson();
      const reloaded = AgentDefinition.fromJson(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });

    it("should load from JSON - example 3", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": [\n      {\n        "name": "firstName",\n        "kind": "string",\n        "value": "Jane"\n      },\n      {\n        "name": "lastName",\n        "kind": "string",\n        "value": "Doe"\n      },\n      {\n        "name": "question",\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    ]\n  },\n  "outputSchema": {\n    "properties": {\n      "answer": {\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    }\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip JSON - example 3", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": [\n      {\n        "name": "firstName",\n        "kind": "string",\n        "value": "Jane"\n      },\n      {\n        "name": "lastName",\n        "kind": "string",\n        "value": "Doe"\n      },\n      {\n        "name": "question",\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    ]\n  },\n  "outputSchema": {\n    "properties": {\n      "answer": {\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    }\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      const output = instance.toJson();
      const reloaded = AgentDefinition.fromJson(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });

    it("should load from JSON - example 4", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": [\n      {\n        "name": "firstName",\n        "kind": "string",\n        "value": "Jane"\n      },\n      {\n        "name": "lastName",\n        "kind": "string",\n        "value": "Doe"\n      },\n      {\n        "name": "question",\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    ]\n  },\n  "outputSchema": {\n    "properties": [\n      {\n        "name": "answer",\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    ]\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip JSON - example 4", () => {
      const json = `{\n  "kind": "prompt",\n  "name": "basic-prompt",\n  "displayName": "Basic Prompt Agent",\n  "description": "A basic prompt that uses the GPT-3 chat API to answer questions",\n  "metadata": {\n    "authors": [\n      "sethjuarez",\n      "jietong"\n    ],\n    "tags": [\n      "example",\n      "prompt"\n    ]\n  },\n  "inputSchema": {\n    "properties": [\n      {\n        "name": "firstName",\n        "kind": "string",\n        "value": "Jane"\n      },\n      {\n        "name": "lastName",\n        "kind": "string",\n        "value": "Doe"\n      },\n      {\n        "name": "question",\n        "kind": "string",\n        "value": "What is the meaning of life?"\n      }\n    ]\n  },\n  "outputSchema": {\n    "properties": [\n      {\n        "name": "answer",\n        "kind": "string",\n        "description": "The answer to the user's question."\n      }\n    ]\n  }\n}`;
      const instance = AgentDefinition.fromJson(json);
      const output = instance.toJson();
      const reloaded = AgentDefinition.fromJson(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });
  });

  describe("YAML serialization", () => {
    it("should load from YAML - example 1", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    firstName:\n      kind: string\n      value: Jane\n    lastName:\n      kind: string\n      value: Doe\n    question:\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    answer:\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip YAML - example 1", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    firstName:\n      kind: string\n      value: Jane\n    lastName:\n      kind: string\n      value: Doe\n    question:\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    answer:\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      const output = instance.toYaml();
      const reloaded = AgentDefinition.fromYaml(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });

    it("should load from YAML - example 2", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    firstName:\n      kind: string\n      value: Jane\n    lastName:\n      kind: string\n      value: Doe\n    question:\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    - name: answer\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip YAML - example 2", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    firstName:\n      kind: string\n      value: Jane\n    lastName:\n      kind: string\n      value: Doe\n    question:\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    - name: answer\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      const output = instance.toYaml();
      const reloaded = AgentDefinition.fromYaml(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });

    it("should load from YAML - example 3", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    - name: firstName\n      kind: string\n      value: Jane\n    - name: lastName\n      kind: string\n      value: Doe\n    - name: question\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    answer:\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip YAML - example 3", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    - name: firstName\n      kind: string\n      value: Jane\n    - name: lastName\n      kind: string\n      value: Doe\n    - name: question\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    answer:\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      const output = instance.toYaml();
      const reloaded = AgentDefinition.fromYaml(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });

    it("should load from YAML - example 4", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    - name: firstName\n      kind: string\n      value: Jane\n    - name: lastName\n      kind: string\n      value: Doe\n    - name: question\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    - name: answer\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("prompt");

      expect(instance.name).toEqual("basic-prompt");

      expect(instance.displayName).toEqual("Basic Prompt Agent");

      expect(instance.description).toEqual(
        "A basic prompt that uses the GPT-3 chat API to answer questions"
      );
    });

    it("should round-trip YAML - example 4", () => {
      const yaml = `kind: prompt\nname: basic-prompt\ndisplayName: Basic Prompt Agent\ndescription: A basic prompt that uses the GPT-3 chat API to answer questions\nmetadata:\n  authors:\n    - sethjuarez\n    - jietong\n  tags:\n    - example\n    - prompt\ninputSchema:\n  properties:\n    - name: firstName\n      kind: string\n      value: Jane\n    - name: lastName\n      kind: string\n      value: Doe\n    - name: question\n      kind: string\n      value: What is the meaning of life?\noutputSchema:\n  properties:\n    - name: answer\n      kind: string\n      description: The answer to the user's question.\n`;
      const instance = AgentDefinition.fromYaml(yaml);
      const output = instance.toYaml();
      const reloaded = AgentDefinition.fromYaml(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.name).toEqual(instance.name);

      expect(reloaded.displayName).toEqual(instance.displayName);

      expect(reloaded.description).toEqual(instance.description);
    });
  });
});
