// Copyright (c) Microsoft. All rights reserved.
// WARNING: This is an auto-generated file. DO NOT EDIT THIS FILE DIRECTLY.

import { FileSearchTool } from "../src/index";

describe("FileSearchTool", () => {
  describe("construction", () => {
    it("should create a new instance with defaults", () => {
      const instance = new FileSearchTool();
      expect(instance).toBeDefined();
    });

    it("should create a new instance with partial initialization", () => {
      const instance = new FileSearchTool({});
      expect(instance).toBeDefined();
    });
  });

  describe("JSON serialization", () => {
    it("should load from JSON - example 1", () => {
      const json = `{\n  "kind": "file_search",\n  "connection": {\n    "kind": "reference"\n  },\n  "vectorStoreIds": [\n    "vectorStore1",\n    "vectorStore2"\n  ],\n  "maximumResultCount": 10,\n  "ranker": "auto",\n  "scoreThreshold": 0.5,\n  "filters": {\n    "fileType": "pdf",\n    "createdAfter": "2023-01-01"\n  }\n}`;
      const instance = FileSearchTool.fromJson(json);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("file_search");

      expect(instance.maximumResultCount).toEqual(10);

      expect(instance.ranker).toEqual("auto");

      expect(instance.scoreThreshold).toEqual(0.5);
    });

    it("should round-trip JSON - example 1", () => {
      const json = `{\n  "kind": "file_search",\n  "connection": {\n    "kind": "reference"\n  },\n  "vectorStoreIds": [\n    "vectorStore1",\n    "vectorStore2"\n  ],\n  "maximumResultCount": 10,\n  "ranker": "auto",\n  "scoreThreshold": 0.5,\n  "filters": {\n    "fileType": "pdf",\n    "createdAfter": "2023-01-01"\n  }\n}`;
      const instance = FileSearchTool.fromJson(json);
      const output = instance.toJson();
      const reloaded = FileSearchTool.fromJson(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.maximumResultCount).toEqual(instance.maximumResultCount);

      expect(reloaded.ranker).toEqual(instance.ranker);

      expect(reloaded.scoreThreshold).toEqual(instance.scoreThreshold);
    });
  });

  describe("YAML serialization", () => {
    it("should load from YAML - example 1", () => {
      const yaml = `kind: file_search\nconnection:\n  kind: reference\nvectorStoreIds:\n  - vectorStore1\n  - vectorStore2\nmaximumResultCount: 10\nranker: auto\nscoreThreshold: 0.5\nfilters:\n  fileType: pdf\n  createdAfter: 2023-01-01\n`;
      const instance = FileSearchTool.fromYaml(yaml);
      expect(instance).toBeDefined();

      expect(instance.kind).toEqual("file_search");

      expect(instance.maximumResultCount).toEqual(10);

      expect(instance.ranker).toEqual("auto");

      expect(instance.scoreThreshold).toEqual(0.5);
    });

    it("should round-trip YAML - example 1", () => {
      const yaml = `kind: file_search\nconnection:\n  kind: reference\nvectorStoreIds:\n  - vectorStore1\n  - vectorStore2\nmaximumResultCount: 10\nranker: auto\nscoreThreshold: 0.5\nfilters:\n  fileType: pdf\n  createdAfter: 2023-01-01\n`;
      const instance = FileSearchTool.fromYaml(yaml);
      const output = instance.toYaml();
      const reloaded = FileSearchTool.fromYaml(output);

      expect(reloaded.kind).toEqual(instance.kind);

      expect(reloaded.maximumResultCount).toEqual(instance.maximumResultCount);

      expect(reloaded.ranker).toEqual(instance.ranker);

      expect(reloaded.scoreThreshold).toEqual(instance.scoreThreshold);
    });
  });

  describe("load and save", () => {
    it("should load from dictionary", () => {
      const data: Record<string, unknown> = {};
      const instance = FileSearchTool.load(data);
      expect(instance).toBeDefined();
    });

    it("should save to dictionary", () => {
      const instance = new FileSearchTool();
      const data = instance.save();
      expect(data).toBeDefined();
      expect(typeof data).toBe("object");
    });
  });
});
