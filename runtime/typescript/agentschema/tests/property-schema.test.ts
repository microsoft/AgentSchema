// Copyright (c) Microsoft. All rights reserved.
// WARNING: This is an auto-generated file. DO NOT EDIT THIS FILE DIRECTLY.

import { PropertySchema } from "../src/index";

describe("PropertySchema", () => {
  describe("JSON serialization", () => {
    it("should load from JSON - example 1", () => {
      const json = `{\n  "examples": [\n    {\n      "key": "value"\n    }\n  ],\n  "strict": true,\n  "properties": {\n    "firstName": {\n      "kind": "string",\n      "sample": "Jane"\n    },\n    "lastName": {\n      "kind": "string",\n      "sample": "Doe"\n    },\n    "question": {\n      "kind": "string",\n      "sample": "What is the meaning of life?"\n    }\n  }\n}`;
      const instance = PropertySchema.fromJson(json);
      expect(instance).toBeDefined();

      expect(instance.strict).toEqual(true);
    });

    it("should round-trip JSON - example 1", () => {
      const json = `{\n  "examples": [\n    {\n      "key": "value"\n    }\n  ],\n  "strict": true,\n  "properties": {\n    "firstName": {\n      "kind": "string",\n      "sample": "Jane"\n    },\n    "lastName": {\n      "kind": "string",\n      "sample": "Doe"\n    },\n    "question": {\n      "kind": "string",\n      "sample": "What is the meaning of life?"\n    }\n  }\n}`;
      const instance = PropertySchema.fromJson(json);
      const output = instance.toJson();
      const reloaded = PropertySchema.fromJson(output);

      expect(reloaded.strict).toEqual(instance.strict);
    });

    it("should serialize to valid JSON - example 1", () => {
      const json = `{\n  "examples": [\n    {\n      "key": "value"\n    }\n  ],\n  "strict": true,\n  "properties": {\n    "firstName": {\n      "kind": "string",\n      "sample": "Jane"\n    },\n    "lastName": {\n      "kind": "string",\n      "sample": "Doe"\n    },\n    "question": {\n      "kind": "string",\n      "sample": "What is the meaning of life?"\n    }\n  }\n}`;
      const instance = PropertySchema.fromJson(json);
      const output = instance.toJson();
      expect(output).toBeDefined();
      const parsed = JSON.parse(output);
      expect(typeof parsed).toBe("object");
    });
  });

  describe("YAML serialization", () => {
    it("should load from YAML - example 1", () => {
      const yaml = `examples:\n  - key: value\nstrict: true\nproperties:\n  firstName:\n    kind: string\n    sample: Jane\n  lastName:\n    kind: string\n    sample: Doe\n  question:\n    kind: string\n    sample: What is the meaning of life?\n`;
      const instance = PropertySchema.fromYaml(yaml);
      expect(instance).toBeDefined();

      expect(instance.strict).toEqual(true);
    });

    it("should round-trip YAML - example 1", () => {
      const yaml = `examples:\n  - key: value\nstrict: true\nproperties:\n  firstName:\n    kind: string\n    sample: Jane\n  lastName:\n    kind: string\n    sample: Doe\n  question:\n    kind: string\n    sample: What is the meaning of life?\n`;
      const instance = PropertySchema.fromYaml(yaml);
      const output = instance.toYaml();
      const reloaded = PropertySchema.fromYaml(output);

      expect(reloaded.strict).toEqual(instance.strict);
    });

    it("should serialize to valid YAML - example 1", () => {
      const yaml = `examples:\n  - key: value\nstrict: true\nproperties:\n  firstName:\n    kind: string\n    sample: Jane\n  lastName:\n    kind: string\n    sample: Doe\n  question:\n    kind: string\n    sample: What is the meaning of life?\n`;
      const instance = PropertySchema.fromYaml(yaml);
      const output = instance.toYaml();
      expect(output).toBeDefined();
      // YAML output should be parseable back
      const reloaded = PropertySchema.fromYaml(output);
      expect(reloaded).toBeDefined();
    });
  });

  describe("load and save", () => {
    it("should load from dictionary", () => {
      const data: Record<string, unknown> = {};
      const instance = PropertySchema.load(data);
      expect(instance).toBeDefined();
    });

    it("should save to dictionary", () => {
      const instance = new PropertySchema();
      const data = instance.save();
      expect(data).toBeDefined();
      expect(typeof data).toBe("object");
    });
  });
});
