// Code generated by AgentSchema emitter; DO NOT EDIT.

package agentschema

import (
	"encoding/json"
	"fmt"

	"gopkg.in/yaml.v3"
)

// Parser represents Template parser definition
type Parser struct {
	Kind    string                 `json:"kind" yaml:"kind"`
	Options map[string]interface{} `json:"options,omitempty" yaml:"options,omitempty"`
}

// LoadParser creates a Parser from a map[string]interface{}
func LoadParser(data interface{}, ctx *LoadContext) (Parser, error) {
	result := Parser{}

	// Handle alternate scalar representations
	switch v := data.(type) {
	case string:
		// Shorthand: string -> Parser
		expansion := map[string]interface{}{"kind": data}
		return LoadParser(expansion, ctx)
	}
	// Load from map
	if m, ok := data.(map[string]interface{}); ok {
		if val, ok := m["kind"]; ok && val != nil {
			result.Kind = val.(string)
		}
		if val, ok := m["options"]; ok && val != nil {
			if m, ok := val.(map[string]interface{}); ok {
				result.Options = m
			}
		}
	}

	return result, nil
}

// Save serializes Parser to map[string]interface{}
func (obj *Parser) Save(ctx *SaveContext) map[string]interface{} {
	result := make(map[string]interface{})
	result["kind"] = obj.Kind
	if obj.Options != nil {
		result["options"] = obj.Options
	}

	return result
}

// ToJSON serializes Parser to JSON string
func (obj *Parser) ToJSON() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := json.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// ToYAML serializes Parser to YAML string
func (obj *Parser) ToYAML() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := yaml.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// FromJSON creates Parser from JSON string
func ParserFromJSON(jsonStr string) (Parser, error) {
	var data map[string]interface{}
	if err := json.Unmarshal([]byte(jsonStr), &data); err != nil {
		return Parser{}, err
	}
	ctx := NewLoadContext()
	return LoadParser(data, ctx)
}

// FromYAML creates Parser from YAML string
func ParserFromYAML(yamlStr string) (Parser, error) {
	var data map[string]interface{}
	if err := yaml.Unmarshal([]byte(yamlStr), &data); err != nil {
		return Parser{}, err
	}
	ctx := NewLoadContext()
	return LoadParser(data, ctx)
}
