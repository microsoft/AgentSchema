// Copyright (c) Microsoft. All rights reserved.
// WARNING: This is an auto-generated file. DO NOT EDIT THIS FILE DIRECTLY.

package agentschema

import (
	"encoding/json"

	"gopkg.in/yaml.v3"
)

// Binding represents Represents a binding between an input property and a tool parameter.

type Binding struct {
	Name  string `json:"name" yaml:"name"`
	Input string `json:"input" yaml:"input"`
}

// LoadBinding creates a Binding from a map[string]interface{}
func LoadBinding(data interface{}, ctx *LoadContext) (Binding, error) {
	result := Binding{}

	// Handle alternate scalar representations
	switch v := data.(type) {
	case string:
		// Shorthand: string -> Binding
		expansion := map[string]interface{}{"input": v}
		return LoadBinding(expansion, ctx)
	}
	// Load from map
	if m, ok := data.(map[string]interface{}); ok {
		if val, ok := m["name"]; ok && val != nil {
			result.Name = val.(string)
		}
		if val, ok := m["input"]; ok && val != nil {
			result.Input = val.(string)
		}
	}

	return result, nil
}

// Save serializes Binding to map[string]interface{}
func (obj *Binding) Save(ctx *SaveContext) map[string]interface{} {
	result := make(map[string]interface{})
	result["name"] = obj.Name
	result["input"] = obj.Input

	return result
}

// ToJSON serializes Binding to JSON string
func (obj *Binding) ToJSON() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := json.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// ToYAML serializes Binding to YAML string
func (obj *Binding) ToYAML() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := yaml.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// FromJSON creates Binding from JSON string
func BindingFromJSON(jsonStr string) (Binding, error) {
	var data map[string]interface{}
	if err := json.Unmarshal([]byte(jsonStr), &data); err != nil {
		return Binding{}, err
	}
	ctx := NewLoadContext()
	return LoadBinding(data, ctx)
}

// FromYAML creates Binding from YAML string
func BindingFromYAML(yamlStr string) (Binding, error) {
	var data map[string]interface{}
	if err := yaml.Unmarshal([]byte(yamlStr), &data); err != nil {
		return Binding{}, err
	}
	ctx := NewLoadContext()
	return LoadBinding(data, ctx)
}
