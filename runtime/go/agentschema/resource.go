// Code generated by AgentSchema emitter; DO NOT EDIT.

package agentschema

import (
	"encoding/json"

	"gopkg.in/yaml.v3"
)

// Resource represents Represents a resource required by the agent
// Resources can include databases, APIs, or other external systems
// that the agent needs to interact with to perform its tasks

type Resource struct {
	Name string `json:"name" yaml:"name"`
	Kind string `json:"kind" yaml:"kind"`
}

// LoadResource creates a Resource from a map[string]interface{}
// Returns interface{} because this is a polymorphic base type that can resolve to different child types
func LoadResource(data interface{}, ctx *LoadContext) (interface{}, error) {
	result := Resource{}

	// Handle polymorphic types based on discriminator
	if m, ok := data.(map[string]interface{}); ok {
		if discriminator, ok := m["kind"]; ok {
			switch discriminator {
			case "model":
				return LoadModelResource(data, ctx)
			case "tool":
				return LoadToolResource(data, ctx)
			}
		}
	}
	// Load from map
	if m, ok := data.(map[string]interface{}); ok {
		if val, ok := m["name"]; ok && val != nil {
			result.Name = val.(string)
		}
		if val, ok := m["kind"]; ok && val != nil {
			result.Kind = val.(string)
		}
	}

	return result, nil
}

// Save serializes Resource to map[string]interface{}
func (obj *Resource) Save(ctx *SaveContext) map[string]interface{} {
	result := make(map[string]interface{})
	result["name"] = obj.Name
	result["kind"] = obj.Kind

	return result
}

// ToJSON serializes Resource to JSON string
func (obj *Resource) ToJSON() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := json.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// ToYAML serializes Resource to YAML string
func (obj *Resource) ToYAML() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := yaml.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// FromJSON creates Resource from JSON string
// Returns interface{} because this is a polymorphic base type that can resolve to different child types
func ResourceFromJSON(jsonStr string) (interface{}, error) {
	var data map[string]interface{}
	if err := json.Unmarshal([]byte(jsonStr), &data); err != nil {
		return nil, err
	}
	ctx := NewLoadContext()
	return LoadResource(data, ctx)
}

// FromYAML creates Resource from YAML string
// Returns interface{} because this is a polymorphic base type that can resolve to different child types
func ResourceFromYAML(yamlStr string) (interface{}, error) {
	var data map[string]interface{}
	if err := yaml.Unmarshal([]byte(yamlStr), &data); err != nil {
		return nil, err
	}
	ctx := NewLoadContext()
	return LoadResource(data, ctx)
}

// ModelResource represents Represents a model resource required by the agent

type ModelResource struct {
	Kind string `json:"kind" yaml:"kind"`
	Id   string `json:"id" yaml:"id"`
}

// LoadModelResource creates a ModelResource from a map[string]interface{}
func LoadModelResource(data interface{}, ctx *LoadContext) (ModelResource, error) {
	result := ModelResource{}

	// Load from map
	if m, ok := data.(map[string]interface{}); ok {
		if val, ok := m["kind"]; ok && val != nil {
			result.Kind = val.(string)
		}
		if val, ok := m["id"]; ok && val != nil {
			result.Id = val.(string)
		}
	}

	return result, nil
}

// Save serializes ModelResource to map[string]interface{}
func (obj *ModelResource) Save(ctx *SaveContext) map[string]interface{} {
	result := make(map[string]interface{})
	result["kind"] = obj.Kind
	result["id"] = obj.Id

	return result
}

// ToJSON serializes ModelResource to JSON string
func (obj *ModelResource) ToJSON() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := json.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// ToYAML serializes ModelResource to YAML string
func (obj *ModelResource) ToYAML() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := yaml.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// FromJSON creates ModelResource from JSON string
func ModelResourceFromJSON(jsonStr string) (ModelResource, error) {
	var data map[string]interface{}
	if err := json.Unmarshal([]byte(jsonStr), &data); err != nil {
		return ModelResource{}, err
	}
	ctx := NewLoadContext()
	return LoadModelResource(data, ctx)
}

// FromYAML creates ModelResource from YAML string
func ModelResourceFromYAML(yamlStr string) (ModelResource, error) {
	var data map[string]interface{}
	if err := yaml.Unmarshal([]byte(yamlStr), &data); err != nil {
		return ModelResource{}, err
	}
	ctx := NewLoadContext()
	return LoadModelResource(data, ctx)
}

// ToolResource represents Represents a tool resource required by the agent

type ToolResource struct {
	Kind    string                 `json:"kind" yaml:"kind"`
	Id      string                 `json:"id" yaml:"id"`
	Options map[string]interface{} `json:"options" yaml:"options"`
}

// LoadToolResource creates a ToolResource from a map[string]interface{}
func LoadToolResource(data interface{}, ctx *LoadContext) (ToolResource, error) {
	result := ToolResource{}

	// Load from map
	if m, ok := data.(map[string]interface{}); ok {
		if val, ok := m["kind"]; ok && val != nil {
			result.Kind = val.(string)
		}
		if val, ok := m["id"]; ok && val != nil {
			result.Id = val.(string)
		}
		if val, ok := m["options"]; ok && val != nil {
			if m, ok := val.(map[string]interface{}); ok {
				result.Options = m
			}
		}
	}

	return result, nil
}

// Save serializes ToolResource to map[string]interface{}
func (obj *ToolResource) Save(ctx *SaveContext) map[string]interface{} {
	result := make(map[string]interface{})
	result["kind"] = obj.Kind
	result["id"] = obj.Id
	result["options"] = obj.Options

	return result
}

// ToJSON serializes ToolResource to JSON string
func (obj *ToolResource) ToJSON() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := json.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// ToYAML serializes ToolResource to YAML string
func (obj *ToolResource) ToYAML() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := yaml.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// FromJSON creates ToolResource from JSON string
func ToolResourceFromJSON(jsonStr string) (ToolResource, error) {
	var data map[string]interface{}
	if err := json.Unmarshal([]byte(jsonStr), &data); err != nil {
		return ToolResource{}, err
	}
	ctx := NewLoadContext()
	return LoadToolResource(data, ctx)
}

// FromYAML creates ToolResource from YAML string
func ToolResourceFromYAML(yamlStr string) (ToolResource, error) {
	var data map[string]interface{}
	if err := yaml.Unmarshal([]byte(yamlStr), &data); err != nil {
		return ToolResource{}, err
	}
	ctx := NewLoadContext()
	return LoadToolResource(data, ctx)
}
