// Code generated by AgentSchema emitter; DO NOT EDIT.

package agentschema

import (
	"encoding/json"

	"gopkg.in/yaml.v3"
)

// Template represents Template model for defining prompt templates.
//
// This model specifies the rendering engine used for slot filling prompts,
// the parser used to process the rendered template into API-compatible format,
// and additional options for the template engine.
//
// It allows for the creation of reusable templates that can be filled with dynamic data
// and processed to generate prompts for AI models.

type Template struct {
	Format Format `json:"format" yaml:"format"`
	Parser Parser `json:"parser" yaml:"parser"`
}

// LoadTemplate creates a Template from a map[string]interface{}
func LoadTemplate(data interface{}, ctx *LoadContext) (Template, error) {
	result := Template{}

	// Load from map
	if m, ok := data.(map[string]interface{}); ok {
		if val, ok := m["format"]; ok && val != nil {
			if m, ok := val.(map[string]interface{}); ok {
				loaded, _ := LoadFormat(m, ctx)
				result.Format = loaded
			}
		}
		if val, ok := m["parser"]; ok && val != nil {
			if m, ok := val.(map[string]interface{}); ok {
				loaded, _ := LoadParser(m, ctx)
				result.Parser = loaded
			}
		}
	}

	return result, nil
}

// Save serializes Template to map[string]interface{}
func (obj *Template) Save(ctx *SaveContext) map[string]interface{} {
	result := make(map[string]interface{})

	result["format"] = obj.Format.Save(ctx)

	result["parser"] = obj.Parser.Save(ctx)

	return result
}

// ToJSON serializes Template to JSON string
func (obj *Template) ToJSON() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := json.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// ToYAML serializes Template to YAML string
func (obj *Template) ToYAML() (string, error) {
	ctx := NewSaveContext()
	data := obj.Save(ctx)
	bytes, err := yaml.Marshal(data)
	if err != nil {
		return "", err
	}
	return string(bytes), nil
}

// FromJSON creates Template from JSON string
func TemplateFromJSON(jsonStr string) (Template, error) {
	var data map[string]interface{}
	if err := json.Unmarshal([]byte(jsonStr), &data); err != nil {
		return Template{}, err
	}
	ctx := NewLoadContext()
	return LoadTemplate(data, ctx)
}

// FromYAML creates Template from YAML string
func TemplateFromYAML(yamlStr string) (Template, error) {
	var data map[string]interface{}
	if err := yaml.Unmarshal([]byte(yamlStr), &data); err != nil {
		return Template{}, err
	}
	ctx := NewLoadContext()
	return LoadTemplate(data, ctx)
}
