// Code generated by AgentSchema emitter; DO NOT EDIT.

#[allow(unused_imports)]
use crate::*;

/// Connection represents Connection configuration for AI agents.
/// `provider`, `kind`, and `endpoint` are required properties here,
/// but this section can accept additional via options.

#[derive(Debug, Clone, Default, serde::Serialize, serde::Deserialize)]
pub struct Connection {
    #[serde(rename = "kind", default)]
    pub kind: String,
    #[serde(rename = "authenticationMode", default)]
    pub authentication_mode: String,
    #[serde(
        rename = "usageDescription",
        skip_serializing_if = "Option::is_none",
        default
    )]
    pub usage_description: Option<String>,
}

impl Connection {
    /// Load from a JSON string.
    pub fn from_json(s: &str) -> Result<Self, String> {
        serde_json::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a JSON string.
    pub fn to_json(&self) -> Result<String, String> {
        serde_json::to_string(self).map_err(|e| e.to_string())
    }

    /// Load from a YAML string.
    pub fn from_yaml(s: &str) -> Result<Self, String> {
        serde_yaml::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a YAML string.
    pub fn to_yaml(&self) -> Result<String, String> {
        serde_yaml::to_string(self).map_err(|e| e.to_string())
    }

    /// Load from a JSON string, dispatching to the appropriate child type.
    /// Returns a `serde_json::Value` containing the deserialized child type.
    pub fn from_json_polymorphic(s: &str) -> Result<serde_json::Value, String> {
        let val: serde_json::Value = serde_json::from_str(s).map_err(|e| e.to_string())?;
        Self::load_polymorphic(val)
    }

    /// Load from a YAML string, dispatching to the appropriate child type.
    /// Returns a `serde_json::Value` containing the deserialized child type.
    pub fn from_yaml_polymorphic(s: &str) -> Result<serde_json::Value, String> {
        let val: serde_json::Value = serde_yaml::from_str(s).map_err(|e| e.to_string())?;
        Self::load_polymorphic(val)
    }

    /// Dispatch a `serde_json::Value` to the appropriate child type based on
    /// the `kind` discriminator field.
    pub fn load_polymorphic(val: serde_json::Value) -> Result<serde_json::Value, String> {
        if let Some(disc) = val.get("kind").and_then(|v| v.as_str()) {
            match disc {
                "reference" => {
                    let typed = ReferenceConnection::from_json(
                        &serde_json::to_string(&val).map_err(|e| e.to_string())?,
                    )?;
                    serde_json::to_value(typed).map_err(|e| e.to_string())
                }
                "remote" => {
                    let typed = RemoteConnection::from_json(
                        &serde_json::to_string(&val).map_err(|e| e.to_string())?,
                    )?;
                    serde_json::to_value(typed).map_err(|e| e.to_string())
                }
                "key" => {
                    let typed = ApiKeyConnection::from_json(
                        &serde_json::to_string(&val).map_err(|e| e.to_string())?,
                    )?;
                    serde_json::to_value(typed).map_err(|e| e.to_string())
                }
                "anonymous" => {
                    let typed = AnonymousConnection::from_json(
                        &serde_json::to_string(&val).map_err(|e| e.to_string())?,
                    )?;
                    serde_json::to_value(typed).map_err(|e| e.to_string())
                }
                _ => serde_json::to_value(
                    serde_json::from_value::<Connection>(val).map_err(|e| e.to_string())?,
                )
                .map_err(|e| e.to_string()),
            }
        } else {
            Ok(val)
        }
    }
}

/// ReferenceConnection represents Connection configuration for AI services using named connections.

#[derive(Debug, Clone, Default, serde::Serialize, serde::Deserialize)]
pub struct ReferenceConnection {
    #[serde(rename = "kind", default)]
    pub kind: String,
    #[serde(rename = "name", default)]
    pub name: String,
    #[serde(rename = "target", skip_serializing_if = "Option::is_none", default)]
    pub target: Option<String>,
}

impl ReferenceConnection {
    /// Load from a JSON string.
    pub fn from_json(s: &str) -> Result<Self, String> {
        serde_json::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a JSON string.
    pub fn to_json(&self) -> Result<String, String> {
        serde_json::to_string(self).map_err(|e| e.to_string())
    }

    /// Load from a YAML string.
    pub fn from_yaml(s: &str) -> Result<Self, String> {
        serde_yaml::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a YAML string.
    pub fn to_yaml(&self) -> Result<String, String> {
        serde_yaml::to_string(self).map_err(|e| e.to_string())
    }
}

/// RemoteConnection represents Connection configuration for AI services using named connections.

#[derive(Debug, Clone, Default, serde::Serialize, serde::Deserialize)]
pub struct RemoteConnection {
    #[serde(rename = "kind", default)]
    pub kind: String,
    #[serde(rename = "name", default)]
    pub name: String,
    #[serde(rename = "endpoint", default)]
    pub endpoint: String,
}

impl RemoteConnection {
    /// Load from a JSON string.
    pub fn from_json(s: &str) -> Result<Self, String> {
        serde_json::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a JSON string.
    pub fn to_json(&self) -> Result<String, String> {
        serde_json::to_string(self).map_err(|e| e.to_string())
    }

    /// Load from a YAML string.
    pub fn from_yaml(s: &str) -> Result<Self, String> {
        serde_yaml::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a YAML string.
    pub fn to_yaml(&self) -> Result<String, String> {
        serde_yaml::to_string(self).map_err(|e| e.to_string())
    }
}

/// ApiKeyConnection represents Connection configuration for AI services using API keys.

#[derive(Debug, Clone, Default, serde::Serialize, serde::Deserialize)]
pub struct ApiKeyConnection {
    #[serde(rename = "kind", default)]
    pub kind: String,
    #[serde(rename = "endpoint", default)]
    pub endpoint: String,
    #[serde(rename = "apiKey", default)]
    pub api_key: String,
}

impl ApiKeyConnection {
    /// Load from a JSON string.
    pub fn from_json(s: &str) -> Result<Self, String> {
        serde_json::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a JSON string.
    pub fn to_json(&self) -> Result<String, String> {
        serde_json::to_string(self).map_err(|e| e.to_string())
    }

    /// Load from a YAML string.
    pub fn from_yaml(s: &str) -> Result<Self, String> {
        serde_yaml::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a YAML string.
    pub fn to_yaml(&self) -> Result<String, String> {
        serde_yaml::to_string(self).map_err(|e| e.to_string())
    }
}

/// AnonymousConnection represents a schema type
#[derive(Debug, Clone, Default, serde::Serialize, serde::Deserialize)]
pub struct AnonymousConnection {
    #[serde(rename = "kind", default)]
    pub kind: String,
    #[serde(rename = "endpoint", default)]
    pub endpoint: String,
}

impl AnonymousConnection {
    /// Load from a JSON string.
    pub fn from_json(s: &str) -> Result<Self, String> {
        serde_json::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a JSON string.
    pub fn to_json(&self) -> Result<String, String> {
        serde_json::to_string(self).map_err(|e| e.to_string())
    }

    /// Load from a YAML string.
    pub fn from_yaml(s: &str) -> Result<Self, String> {
        serde_yaml::from_str(s).map_err(|e| e.to_string())
    }

    /// Serialize to a YAML string.
    pub fn to_yaml(&self) -> Result<String, String> {
        serde_yaml::to_string(self).map_err(|e| e.to_string())
    }
}
