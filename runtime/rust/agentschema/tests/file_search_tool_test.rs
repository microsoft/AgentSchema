// Code generated by AgentSchema emitter; DO NOT EDIT.

use agentschema::FileSearchTool;

#[test]
fn test_file_search_tool_load_json() {
    let json = r####"
{
  "kind": "file_search",
  "connection": {
    "kind": "reference"
  },
  "vectorStoreIds": [
    "vectorStore1",
    "vectorStore2"
  ],
  "maximumResultCount": 10,
  "ranker": "auto",
  "scoreThreshold": 0.5,
  "filters": {
    "fileType": "pdf",
    "createdAfter": "2023-01-01"
  }
}
"####;
    let result = FileSearchTool::from_json(json);
    assert!(
        result.is_ok(),
        "Failed to load from JSON: {:?}",
        result.err()
    );
    let instance = result.unwrap();
    assert_eq!(instance.kind, "file_search");
    assert!(
        instance.maximum_result_count.is_some(),
        "Expected maximum_result_count to be Some"
    );
    assert_eq!(instance.maximum_result_count.as_ref().unwrap(), &10);
    assert!(instance.ranker.is_some(), "Expected ranker to be Some");
    assert_eq!(instance.ranker.as_ref().unwrap(), &"auto");
    assert!(
        instance.score_threshold.is_some(),
        "Expected score_threshold to be Some"
    );
    assert_eq!(instance.score_threshold.as_ref().unwrap(), &0.5);
}

#[test]
fn test_file_search_tool_load_yaml() {
    let yaml = r####"
kind: file_search
connection:
  kind: reference
vectorStoreIds:
  - vectorStore1
  - vectorStore2
maximumResultCount: 10
ranker: auto
scoreThreshold: 0.5
filters:
  fileType: pdf
  createdAfter: 2023-01-01

"####;
    let result = FileSearchTool::from_yaml(yaml);
    assert!(
        result.is_ok(),
        "Failed to load from YAML: {:?}",
        result.err()
    );
    let instance = result.unwrap();
    assert_eq!(instance.kind, "file_search");
    assert!(
        instance.maximum_result_count.is_some(),
        "Expected maximum_result_count to be Some"
    );
    assert!(instance.ranker.is_some(), "Expected ranker to be Some");
    assert!(
        instance.score_threshold.is_some(),
        "Expected score_threshold to be Some"
    );
}

#[test]
fn test_file_search_tool_roundtrip() {
    let json = r####"
{
  "kind": "file_search",
  "connection": {
    "kind": "reference"
  },
  "vectorStoreIds": [
    "vectorStore1",
    "vectorStore2"
  ],
  "maximumResultCount": 10,
  "ranker": "auto",
  "scoreThreshold": 0.5,
  "filters": {
    "fileType": "pdf",
    "createdAfter": "2023-01-01"
  }
}
"####;
    let result = FileSearchTool::from_json(json);
    assert!(result.is_ok(), "Failed to load: {:?}", result.err());
    let instance = result.unwrap();
    let json_output = instance.to_json();
    assert!(
        json_output.is_ok(),
        "Failed to serialize to JSON: {:?}",
        json_output.err()
    );
}
